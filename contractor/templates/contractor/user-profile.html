{% extends "base.html" %}

{% block title %}
| User Profile
{% endblock %}

{% block extenalcss %}
{% load static %}
<!-- datatables  -->
<link rel="stylesheet" type="text/css" href="{% static 'css/responsive.bootstrap4.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/dataTables.bootstrap4.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/buttons.dataTables.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/media.css' %}">
{% endblock %}

{% block content %}
{% load static %}
<div id="pcoded" class="pcoded">
  <div class="pcoded-overlay-box"> </div>
  <div class="pcoded-container navbar-wrapper">

	{% include "contractor/header.html" %}
	
    <div class="pcoded-main-container">
		<div class="pcoded-wrapper">
			
			{% include "contractor/navbar.html" %}
			
			<div class="pcoded-content">
				<div class="page-header card">
					<div class="row align-items-end">
						<div class="col-lg-8">
							<div class="page-header-title">
								<div class="d-inline">
									<h5><a href="/contractor/users/"><i class="icofont icofont-simple-left"></i></a>{{user.first_name}} {{user.last_name}}</h5>
								</div>
							</div>
						</div>
						<div class="col-lg-4">
							
						</div>
					</div>
				</div>
				<div class="page-header card">
					<div class="card">
						<div class="card-block">
							<div class="user-prof-one-part clearfix">
								<div class="image">
									<img src="{% static 'img/prf-img.png' %}" alt="">
								</div>
								<div class="text v-product-top">
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
													<label class="col-sm-4 col-form-label">First Name</label>
													<div class="col-sm-8">
														<h4>{{user.first_name}}</h4>
													</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
												<label class="col-sm-4 col-form-label">Last Name</label>
												<div class="col-sm-8">
													<h4>{{user.last_name}}</h4>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
													<label class="col-sm-4 col-form-label">Email Address</label>
													<div class="col-sm-8">
														<h4>{{user.email}}</h4>
													</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
													<label class="col-sm-4 col-form-label">Telephone Number</label>
													<div class="col-sm-8">
														<h4>{{user.phone}}</h4>
													</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
													<label class="col-sm-4 col-form-label">Total Earned Points</label>
													<div class="col-sm-8">
														<h4>{{user.total_points}}</h4>
													</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-6 col-lg-12 col-sm-12">
											<div class="form-group row">
													<label class="col-sm-4 col-form-label">Available Points</label>
													<div class="col-sm-8">
														<h4>{{user.available_points}}</h4>
													</div>
											</div>
										</div>
									</div>
									
								</div>
							</div>
						</div>
					</div>
					<div class="page-header-title p-b-15">
						<div class="d-inline">
							<h5>User Information</h5>
						</div>
					</div>
					<div class="card">
						<div class="card-block">
							<div class="v-product-top">
								<div class="row">
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Company Name</label>
												<div class="col-sm-8">
													<h4>{{user.company}}</h4>
												</div>
										</div>
									</div>
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Country</label>
												<div class="col-sm-8">
													<h4>{{user.address.country}}</h4>
												</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Address</label>
												<div class="col-sm-8">
													<h4>{{user.address.add_line1}},<br>
														{{user.address.add_line2}}
													</h4>
												</div>
										</div>
									</div>
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Zip Code</label>
												<div class="col-sm-8">
													<h4>{{user.address.zip_code}}</h4>
												</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">City</label>
												<div class="col-sm-8">
													<h4>{{user.address.city}}</h4>
												</div>
										</div>
									</div>
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Refer Code</label>
												<div class="col-sm-8">
													<h4>{{user.refer_code}}</h4>
												</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">State</label>
												<div class="col-sm-8">
													<h4>{{user.address.state}}</h4>
												</div>
										</div>
									</div>
									<div class="col-xl-6 col-lg-12 col-sm-12">
										<div class="form-group row">
												<label class="col-sm-4 col-form-label">Refer By</label>
												<div class="col-sm-8">
													<h4>{{user.referred_by}}</h4>
												</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="page-header-title p-b-15">
						<div class="d-inline">
							<h5>Reward History</h5>
						</div>
					</div>
					<div class="card">
						<div class="card-block">
								<div class="dt-responsive table-responsive">
									<table id="multi-colum-dt1" class="table table-striped table-bordered nowrap">
											<thead>
												<tr>
													<th>Date and Time</th>
													<th>QR Code</th>
													<th>Earned Points</th>
													<th>Splited </th>
													<th>Points-Type</th>
													<th>Reward-Type</th>
													<th>Reason</th>
												</tr>
											</thead>
											<tbody>
												{% for scannedQR in scannedQRReward %}
												<tr>
													<td>{{scannedQR.created_at}}</td>
													<td>{{scannedQR.id}}</td>
													<td>{{scannedQR.transaction.point}}</td>
													<td>{{scannedQR.transaction.splitted}}</td>
													<td>{{scannedQR.transaction.type}}</td>
													<td>{{scannedQR.transaction.transaction_type}}</td>
													<td>{{scannedQR.transaction.reason}}</td>
												</tr>
												{% endfor %}
												
											</tbody>
									</table>
								</div>
						</div>
					</div>
					<div class="page-header-title p-b-15">
						<div class="d-inline">
							<h5>Assigned Task</h5>
						</div>
					</div>
					<div class="card">
						<div class="card-block">
								<div class="dt-responsive table-responsive">
									<table id="multi-colum-dt2" class="table table-striped table-bordered nowrap">
											<thead>
												<tr>
													<th>Job Category</th>
													<th>Decription</th>
													<th>Status</th>
													
												</tr>
											</thead>
											<tbody>
												{% for task in tasks %}
												<tr>
													<td>{{task.job.job_name}}</td>
													<td>{{task.description}}</td>
													<td>{{task.status}}</td>
												</tr>
												{% endfor %}

											</tbody>
									</table>
								</div>
						</div>
					</div>
						
					
				</div>
			</div>
		</div>
  	</div>
</div>

{% endblock %}

{% block extrajs %}
<!-- data table -->
<script type="text/javascript" src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/dataTables.buttons.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/dataTables.bootstrap4.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/dataTables.responsive.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/data-table-custom.js' %}" type="text/javascript"></script>

<script type="text/javascript">
		$('#multi-colum-dt1').DataTable({
			columnDefs: [{
				targets: [0],
				orderData: [0, 1]
			}, {
				targets: [1],
				orderData: [1, 0]
			}, {
				targets: [2],
				orderData: [2, 0],
				
			}]
		});

		
		$('#multi-colum-dt2').DataTable({
			columnDefs: [{
				targets: [0],
				orderData: [0, 1]
			}, {
				targets: [1],
				orderData: [1, 0]
			}, {
				targets: [2],
				orderData: [2, 0],
				
			}]
		});

		
		
</script>

{% endblock %}